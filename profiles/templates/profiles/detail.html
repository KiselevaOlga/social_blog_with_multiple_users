<!DOCTYPE html>
{% extends 'base.html' %}
{% block content %}
    <img class="img-thumbnail" src="{{object.avatar.url}}" style="width:10%">
    <h1>{{object.user}}</h1>
    <h2>Posts: {{object.get_posts_no}}</h2>
    <h2>Likes given: {{object.get_likes_given_no}}</h2>
    <h2>Likes received: {{object.get_likes_received}}</h2>
    <h2>Friends: {{object.get_friends_no}}</h2>

    {% if object.user not in rel_receiver and object.user not in rel_sender %}
        <form method="POST" action="{% url 'profiles:send_invite'%}">
          {% csrf_token %}
          <input type="hidden" name='profile_pk' value='{{object.pk}}'>
          <button type="submit" class="btn btn-primary">Add to friends</button>
        </form>
    {% endif %}
      
    {% if object.user in rel_receiver and request.user not in object.friends.all%}  
        <button class="btn btn-primary disabled">Waiting for confirmation</button>
    {% endif %}
      
    {% if request.user in object.friends.all %}  
        <form method='POST' action="{% url 'profiles:remove_friend'%}">
          {% csrf_token %}
          <input type="hidden" name='profile_pk' value='{{object.pk}}'>
          <button type="submit" class="btn btn-danger">Remove from friends</button>
        </form>
    {% endif %}
    {% if len_posts %}
        {% for post in posts %}
          {{post.content}}
        {% endfor %}
    {%else %}
        <h3>No posts yet from this user</h3>
    {% endif %}
        
{% endblock content %}