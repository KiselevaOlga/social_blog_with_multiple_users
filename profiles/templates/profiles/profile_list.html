<!DOCTYPE html>
{% extends 'base.html' %}
{% block content %}

  {% if is_empty %}
    <h1>No profiles to interact with</h1>
  {% endif %}
    
    {% for obj in object_list %}
    <!-- put it in cards -->
      <h2>{{obj.user}}</h2>
      <h3>{{obj.bio}}</h3>
      
      <img class="mr-3 mt-3 rounded-circle avatar" src="{{obj.avatar.url}}">
      <a href="{{obj.get_absolute_url}}"><button class="btn btn-primary">See profile</button></a>
      {% if obj.user not in rel_receiver and obj.user not in rel_sender %}
        <form method="POST" action="{% url 'profiles:send_invite'%}">
          {% csrf_token %}
          <input type="hidden" name='profile_pk' value='{{obj.pk}}'>
          <button type="submit" class="btn btn-primary">Add to friends</button>
        </form>
      {% endif %}
      
      {% if obj.user in rel_receiver and request.user not in obj.friends.all%}  
        <button class="btn btn-primary disabled">Waiting for confirmation</button>
      {% endif %}
      
      {% if request.user in obj.friends.all %}  
        <form method='POST' action="{% url 'profiles:remove_friend'%}">
          {% csrf_token %}
          <input type="hidden" name='profile_pk' value='{{obj.pk}}'>
          <button type="submit" class="btn btn-danger">Remove from friends</button>
        </form>
      {% endif %}
      <p>--------------------------------------------------------------------------------</p>
    {% endfor %}

{% endblock content %}